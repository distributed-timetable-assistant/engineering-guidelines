# راهنمای کامیت

پیام‌های کامیت باکیفیت برای حفظ یک کدبیس سالم ضروری هستند. آن‌ها به توسعه‌دهندگان جدید کمک می‌کنند تا زمینه را درک کنند، دیباگ کردن را با `git blame` ساده می‌کنند و امکان تولید خودکار لاگ تغییرات (changelog) را فراهم می‌کنند.

## ساختار پیام

یک پیام کامیت از یک **هدر**، **بدنه** و **پاورقی** تشکیل شده است.

```text
<type>(<scope>): <subject>

<body (اختیاری، اما توصیه می‌شود)>

<footer (اختیاری)>
```

---

## ۱. هدر (The Header)

هدر اجباری است و باید **۵۰ کاراکتر یا کمتر** باشد.

### نوع (Type)
باید یکی از موارد زیر باشد:

| نوع          | توضیحات                                                        | تأثیر SemVer    |
|:-------------|:---------------------------------------------------------------|:------------------|
| **feat**     | یک ویژگی جدید                                                  | `MINOR`           |
| **fix**      | رفع باگ                                                        | `PATCH`           |
| **docs**     | تغییرات در مستندات                                             | `PATCH`           |
| **style**    | فرمت‌دهی، سمی‌کالن‌های فاقد، فضای خالی (بدون تغییر کد)         | `PATCH`           |
| **refactor** | تغییر کدی که نه باگ رفع می‌کند و نه ویژگی اضافه می‌کند         | `PATCH`           |
| **perf**     | تغییر کدی که عملکرد را بهبود می‌بخشد                           | `PATCH`           |
| **test**     | افزودن تست‌های فاقد یا اصلاح تست‌های موجود                     | `PATCH`           |
| **build**    | تغییراتی که بر سیستم ساخت یا وابستگی‌های خارجی تأثیر می‌گذارد  | `PATCH`           |
| **ci**       | تغییرات در فایل‌های کانفیگ و اسکریپت‌های CI                    | `PATCH`           |
| **chore**    | سایر تغییرات که فایل‌های src یا تست را تغییر نمی‌دهند           | `PATCH`           |
| **revert**   | برگرداندن یک کامیت قبلی                                        | `PATCH`           |

### دامنه (Scope)
دامنه اختیاری است اما توصیه می‌شود. "مکان" تغییر کامیت را مشخص می‌کند.
*   **مثال‌ها**: `auth`, `api`, `ui`, `database`, `deps`.
*   **فرمت**: `feat(auth): ...`

### موضوع (Subject)
موضوع شامل توصیف مختصر تغییر است.
*   **حالت امری**: "Add" نه "Added"، "Fix" نه "Fixed".
*   **بدون نقطه**: در انتها نقطه نگذارید.
*   **حروف کوچک**: حرف اول معمولاً کوچک است (Conventional Commits این را اجبار نمی‌کند، اما یکپارچگی کلید است. *نکته: "Seven Rules" می‌گوید با حروف بزرگ شروع کنید، مثال‌های Conventional Commits اغلب با حروف کوچک هستند. ما از **حروف کوچک** پیروی می‌کنیم تا با تنظیمات پیش‌فرض `commitlint` مطابقت داشته باشد، مگر اینکه طور دیگری تنظیم شده باشد.*) -> *تصحیح خودکار: فایل قبلی می‌گفت "Capitalize". قانون "Seven Rules" می‌گوید بزرگ بنویسید. Conventional Commits خنثی است. بیایید به **Capitalize** (حرف اول بزرگ) وفادار بمانیم تا در لاگ‌های گیت حرفه‌ای‌تر به نظر برسد و با قانون قبلی مطابقت داشته باشد.*

---

## ۲. بدنه (The Body)

بدنه اختیاری است اما برای تغییرات غیربدیهی قویاً توصیه می‌شود.
*   **شکستن خط در ۷۲ کاراکتر**: این خوانایی را در تمام محیط‌ها تضمین می‌کند.
*   **انگیزه**: توضیح دهید *چرا* این تغییر را انجام می‌دهید.
*   **تضاد**: رفتار جدید را با رفتار قبلی مقایسه کنید.
*   **توضیح**: توضیح دهید *چه چیزی* و *چرا*، نه *چگونه* (کد، چگونه را توضیح می‌دهد).

---

## ۳. پاورقی (The Footer)

پاورقی برای اطلاعات متا استفاده می‌شود.

### تغییرات شکننده (Breaking Changes)
تمام تغییرات شکننده باید در پاورقی با توصیف تغییر، توجیه و یادداشت‌های مهاجرت ذکر شوند.
*   **فرمت**: با `BREAKING CHANGE: <description>` شروع کنید.
*   **جایگزین**: اضافه کردن `!` بعد از type/scope در هدر (مثلاً `feat(api)!: ...`).

### ارجاعات
*   **Issues**: `Closes #123`, `Fixes #42`.
*   **ADRs**: `ADR: 004`.

### همکاری
*   **Co-authored-by**: `Co-authored-by: Name <name@example.com>`

---

## مثال‌ها

### ویژگی با دامنه
```text
feat(auth): Add Google OAuth login support

Add support for Google OAuth 2.0 to allow users to sign up
and log in using their Google accounts. This simplifies the
onboarding process.

Closes #101
```

### رفع باگ با تغییر شکننده
```text
fix(api): Handle null values in user response

Previously, the API crashed when the user had no address.
Now, it returns a null address field instead.

BREAKING CHANGE: The `address` field in the user object
can now be null. Clients must update their code to handle
this case.
```

### مستندات
```text
docs(readme): Update installation instructions
```

### بازگردانی (Revert)
```text
revert: let us never speak of this again

This reverts commit 6b2a412.
```
